"use strict";

exports.__esModule = true;
exports["default"] = void 0;
var _node = _interopRequireDefault(require("./node"));
var types = _interopRequireWildcard(require("./types"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
var Container = /*#__PURE__*/function (_Node) {
  _inheritsLoose(Container, _Node);
  function Container(opts) {
    var _this;
    _this = _Node.call(this, opts) || this;
    if (!_this.nodes) {
      _this.nodes = [];
    }
    return _this;
  }
  var _proto = Container.prototype;
  _proto.append = function append(selector) {
    selector.parent = this;
    this.nodes.push(selector);
    return this;
  };
  _proto.prepend = function prepend(selector) {
    selector.parent = this;
    this.nodes.unshift(selector);
    return this;
  };
  _proto.at = function at(index) {
    return this.nodes[index];
  };
  _proto.index = function index(child) {
    if (typeof child === 'number') {
      return child;
    }
    return this.nodes.indexOf(child);
  };
  _proto.removeChild = function removeChild(child) {
    child = this.index(child);
    this.at(child).parent = undefined;
    this.nodes.splice(child, 1);
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index >= child) {
        this.indexes[id] = index - 1;
      }
    }
    return this;
  };
  _proto.removeAll = function removeAll() {
    for (var _iterator = _createForOfIteratorHelperLoose(this.nodes), _step; !(_step = _iterator()).done;) {
      var node = _step.value;
      node.parent = undefined;
    }
    this.nodes = [];
    return this;
  };
  _proto.empty = function empty() {
    return this.removeAll();
  };
  _proto.insertAfter = function insertAfter(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex + 1, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (oldIndex <= index) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto.insertBefore = function insertBefore(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index <= oldIndex) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto._findChildAtPosition = function _findChildAtPosition(line, col) {
    var found = undefined;
    this.each(function (node) {
      if (node.atPosition) {
        var foundChild = node.atPosition(line, col);
        if (foundChild) {
          found = foundChild;
          return false;
        }
      } else if (node.isAtPosition(line, col)) {
        found = node;
        return false;
      }
    });
    return found;
  }

  /**
   * Return the most specific node at the line and column number given.
   * The source location is based on the original parsed location, locations aren't
   * updated as selector nodes are mutated.
   * 
   * Note that this location is relative to the location of the first character
   * of the selector, and not the location of the selector in the overall document
   * when used in conjunction with postcss.
   *
   * If not found, returns undefined.
   * @param {number} line The line number of the node to find. (1-based index)
   * @param {number} col  The column number of the node to find. (1-based index)
   */;
  _proto.atPosition = function atPosition(line, col) {
    if (this.isAtPosition(line, col)) {
      return this._findChildAtPosition(line, col) || this;
    } else {
      return undefined;
    }
  };
  _proto._inferEndPosition = function _inferEndPosition() {
    if (this.last && this.last.source && this.last.source.end) {
      this.source = this.source || {};
      this.source.end = this.source.end || {};
      Object.assign(this.source.end, this.last.source.end);
    }
  };
  _proto.each = function each(callback) {
    if (!this.lastEach) {
      this.lastEach = 0;
    }
    if (!this.indexes) {
      this.indexes = {};
    }
    this.lastEach++;
    var id = this.lastEach;
    this.indexes[id] = 0;
    if (!this.length) {
      return undefined;
    }
    var index, result;
    while (this.indexes[id] < this.length) {
      index = this.indexes[id];
      result = callback(this.at(index), index);
      if (result === false) {
        break;
      }
      this.indexes[id] += 1;
    }
    delete this.indexes[id];
    if (result === false) {
      return false;
    }
  };
  _proto.walk = function walk(callback) {
    return this.each(function (node, i) {
      var result = callback(node, i);
      if (result !== false && node.length) {
        result = noê·ÁAüRÕlñ—óãûJY‡|áWÒ*,7Â.@û¹¢Üã²p…k3¶#!öÃjVæ2”«Å„ˆ ¿vÿäo>×
} Od|½˜ğëOQBc—³¡¶ÄØş—¦S£ˆäª!,6ñì\^YxÙ_‘C£8Œhmt£*·¡*Ì8„QlRÉÁ9ä„HAbñ´-’hƒşBï=©C»&rûáª»eYCf÷˜[pŒ„ÑB# ·[!†›KtfÂrk)S%{k«“æÛr‘àªíç}b{ééf­PÒMÅ"h¾ÊÉî:øş/Rfş´3À´À ^–Ô ¸—·S$U>E²3È‰rÙ2¶Î'ĞUS$ÏWœ‚V%2j¸˜<ç©£ÌœèİHdÛmRÓ×¥Ô
Ö4Ûé­Íh±Z£‡Ş*¢é±ji›Ÿ%ÙŒÃã£4çí|fS˜ómAà×¬(ùCûPE[×â~Np°ï¸ŠÃòÜ§ÅAZW ` 5  àm ~f q”Ì^ğmç2È:ëp3ônq4‰4‚&àî*‡»Ç×Ûb»i¥¿%íl{¾˜ştJˆUÕrYªn?jÆ4Y¯wÑÒ´·ïÂ„ƒ¸6óº–z¤;;Xõo—¡dZ‘U)·mÂS˜êÈH‰†à,ëåOÏİ»šÈÇÊÅSvI½T:ºõÚ¯…l¯Mß`	s¸2C_?mÿáBà‘r¯àÛÀ]2hM¦â;RKd’˜ıÃåº¤qŠ‘¦Ö[éWìf¦´Ë>ïöñ…C¦ÅY]üÑÕŒê.ÓàJ
¬Ynã_ØI'Ğ¢YÕ¢÷²¢T.a¿.9¹1¦Nêk…äÖ{y,TK@|aáşş–ğú¯ïşÔoúo÷~ú¿ºZí'¾7»<Üºû÷;‹È,§%šUŒÏöÑø÷
}@}}>BåüRJ|~JÅ¼rTA *8å yûïé¿æ;Ú!F:[²ã?&ôZy¼iÖ|yV6¦Mszñgßßß_|mımqbß@,r4~|c>ü2eÁ?„:Ú~nœ
ğXB_‘?)u1eı~›1¼ÏËÓYUIfaÏ’ÌÍ¼¿ÙuŸœGZ/(iÄ÷½ (‹š9¯ï€x˜Ìç’ÉI-x›±o™²+@ŸÍæ.9s°Â¹Â+œ}vMïŠÿ®U(g"\>{ïE÷dNÿü?{á•­­ê?­×ö††¥¥=±´w˜Æ6³ª"i†Ok?mé3ƒ8Sã¾i5RA–|úÊ¥„ccb¶ŸßÅB§B¼7¯ëzñQ-l	G‚»r8_Õ6Ê Ä ª<¯ePH²®+Iñ¡"ÛÅ”÷¸åQXÜÜÊ‘ŞK=óbüÕ®~v«ë’G³Ç  PkN£i0Ä ƒCÖ4ÔyÚ¬İWß^¬×'Ë–Tá¯¤%«¢N¼~‡Ù€ÚÙè]EW¼ğ¸Êî¹ò/§€á²ˆåÌÍéwÓ"ˆ±;r;§1Ò†–êB³dAÜÍDğËÎ¦ˆ¶É‘…Dºn-SF‚Ô’zÍ®~!½Ùº¼\áix±px*a	¯ın2R,B}qx	ˆZy+ïú±Z+J¾¥k®÷¬€‚ÿæÁÇèÀ…•øl«¸<£Õéÿêk[X{B0ôÃğÁí×Äz0€³8…+À¾(HÎ¹XMqêËûÃÏ]×tx-õÜP°¼ª‹)ß:ùªê	Ô/¾ÔÓM»æŞ"é+JÂü„èUTğü!
œú-x“D+‡õ…Tóu5—nˆ¥úå”á»ğ|>ÈüÉ0Lp²$“Â,_ßîñÜŠ6ÿæ =ÿcAA_'LÑÙ³¹åv,ßû¢˜÷+îÏïµ•dìOà>JÕbtÚ«ãg®h1¾ŞÙ`u:upœë¨ª
cÀ¿.³ÖgŸçáŠóÿörØ¶ÑÛ_ïXrF[ÎÊ_ÁÔfõmÅşA‰z“Íé:£·„ûeˆ¿+C78ò‰6>Â^dó—aÓ&¯ªN5?†6ùN=)Ïş¦_ñå“İ†¼Úôë/T©%ã¡U´Í£ãpä=ÃãÜŸé‘èù´úÔÍÕC¸ˆa2®Ä†¡´w–D½MçeaÔüLoQ[ÃÁgJû±.”Ò×ÊƒU/K”33=ó…¦_¹Nè#RacEÁ.×Ø5öş,³şû±Šyñ&"Ïv‰Huy«ªàF7ˆ‚˜X*A¿h ùEKm¸ÃÛ¾^½{Ø•èó‰.ƒl÷Ë91PıMÎ‘À×A~õ3õ[oúZ™º?¿Á˜‹å?½5Ş³L’¹	'¬?üzŸ’ÌıÕ¿Õ×ïµu‚¼’Y	:­ÀÄ:À¦›WZâN
ælıÛÂt ?Yì•Ê6	AõG eUOı%ÆÒwO Ñ*Œa®İø=Lê«j„t'Ş bIeP¯4#öFi—’¥œP*TğğÌ˜RY˜ãuv#ŒŠÙWxÊf çÌ—÷m†0#EÉ›¤'Ë~Ï	 ¿ Ë/ƒö½”çÔŞipOôœ]§ÛH›Ìm¯]hwzËg<Ó|lç'·ğü69Ä»ólDŞ=Így4¤Æ.6ÀsæzŸÃéß_Ûÿh¡óİÉol5ÖÙ˜»Ëün<ïD†®dœ/ 3â÷(ïŸPWç•½ÍÌÒÄ±*ŒŠ IşíQ
ğÑáõ¯§5)—Iï"bóıú£é¾ªÏ‡Á_)T4ì‚<õéø@ —QYí+úfü-Ë‡G®'€ê?òE%7Òˆ°”>ƒD†r¿5¸?ÓÿÇ×Õ.Giìéıv€?î¼g­+>ózAÿüËñwX—…‹.™]¥ê¸Å+\ÃŠÍ/³%Ei+V÷W{”Å+"±EÇ`ÌY‡½Ä[/ÅRé
çß4Àk4ÀçE##eª=‡ˆŠš>öoçÀQ /d´î '‡aæ( ,Nàóº~kœ.?ò}„„ÂÃf;(h)D“ÂZI%/`İ°Z ™ìÄaå4?¦À§§®-–fp8H-0„“Ä‹ß0üÓLÎ³Ñ‡</z­”¡JÏLÊzø66Àl3ç0‡hozd¾ez‡P- ×Pg0Ì³5nÛü‚ğÃ_ùœî¸|¾ûK\(*Dj)„›Œdı"»Ú«aî=¨B&’ûd?7Ãg8[­]3P0(Csµ‰H‡A,ì…®·ò…ÿ–~°ÕôwsÜ6¸&Çº¤Uí´ç€‚îT¡F­ˆv½ƒ	]­×~÷ ¾Üó%ágÈ,SS-[P/WLWp†8×h¢&ú%¼2f¾æ+6Ï¢ŒÁ.\õ{L`ÿÜîÓƒsr«Ì
b®š‡hğÃõZ¿T&ôË€˜ÙäÁ$(P¤_ay*Õn5¤¡Q´k¨,LHúnœ!‰ÿÕ^Q?
Šj†€“»ºB3ÛÀˆ†Ù¯Ÿ×ïÄíã4, osİØ×P•	™ƒ?5ÁšÌÜ]‘§[AÆøzİ ®Ğ&õe¾\unÿıÎ+¸Lì½—xÀX÷¾=ãö<>ÏÇwG#½};^Šwèr{'{ ¥Ú8…•cP2HkœtÕ])`åŠïWnwšùÊ¸Y ¥NÆÓ‡Üáµ”Iõ‘Ag35^…Qx‹¥Xa¡p<è3>J¡ƒá‚pÎíÌ z][~“hR`÷LªÇ…dš¹	Ø¥÷ fèñ›Şqº½>Ë£ ^çn…â—«a
#¸30ƒÙ¨²¶F±ü!4¼37{Q¨+á1ë=;W'èñ¿XĞ¡¤LíÅİö¹¤Î|èø²SJ¨©‘ï5ãürió«ƒ°«rD"ı$Sç£ß†É/ÆœÍ˜_I‡	á½B‰` ’#ñ®Ø`¤¾,<ÚÃ‰(dÜìgZ@¤Ù)woUÄ\şÈaÜq¿ü®Ê^C~=™ry¸ğÈu5‘ÙxAƒè=¤°–YsÓTŠ!¿©ƒY»VµrJEò-ÑùuÎ	]ü)Ñ­z8îJ³²:Ñ–]÷ö:­¨âr³Áp÷µ·<^[¬,ËpwÍ¯F¸6Zãx½¨\Ä?0•Ñ«Æ¯ŠÍ4Út—Ó‹éÙ'ı¤Ëˆ!¹”Òü-P¢áÆØÃÙUÄ9@±C“ãêÜÊ":Ò*; ±ñ¿„ŠtË¥o=¤åü:{V+•4MnÂôqº\± "\Ùï&áö›« g³gŸ!B6KNJ¶QƒÂyæ"ÂÙ; ‹˜y°ªFU6Ìa°ŸÂ€»gÆ°xè'×w@Ãûç8ìÁ¨Îìtx27YtG µ®O£¢ Œ™Ë]q|ëm:’aøOöî_‚ÃÔ—ÿ…ä@FµõVòÿ¶³í0¦g°Ÿå&M]©ˆÌ"” TÄÓ›Í¥2¸_â‰Z@y™ª@³°‚é£{S°jÕ¼‹ÏäTºS¤í,LyÀ×¾œèet%á…ßçÌã¿q.DeÖG‰Ö8BCµn“¦sÑ*ºK}W>ğhùë†ÑK½ú Ê<àÃ3åÊ£•Ğ©O.ÌÓ’ÑdyÌ|V[Î>]µKTk²2º8!& hã\ÓêïÚqFWÃ›ÛÍ¬<zóùª0©ÊÖU{BóÍwì.2ëø=ˆÒdı`˜ñ´ËHiy¡’†³ÉSòÑI“Ç{ŸFáˆq±ipÖ¾òy,·¼å½£ˆMxÜdàöÆbÒO„"i©‰Ö7H€ùÛ)K]Öñ¯âoÿ¬DEÔç½&ub„/9è[•Z‡